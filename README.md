这个社区系统有五大模块，如下所示：

### 一、 世界引擎 (World Engine)

_这是模拟世界的基础物理和规则。_

1.  **时间线管理 (Timeline Engine)**
    - **核心职责**：作为世界的“主时钟”或“心跳”。它以固定的步长（例如：每秒=模拟 1 分钟）推进时间，并触发所有其他系统的更新。
2.  **日志存储 (Logging System)**
    - **核心职责**：作为“黑匣子”。忠实记录系统运行中发生的所有关键事件、Agent 决策、交互和错误，用于未来的调试、分析和行为回放。

### 二、 智能体核心 (Agent Core)

_这是构成“人”的基础，即 AI 的“身体”和“状态”。_

3.  **Agent 管理 (Agent Registry)**
    - **核心职责**：负责创建、存储和管理所有 Agent 实例。它维护每个 Agent 的“身份卡”：包括人设（System Prompt）、配置（例如使用哪个 LLM）和当前物理位置。
4.  **交互功能 (Interaction System)**
    - **核心职责**：定义 Agent 可以执行的“动作集”（动词库，如 `speak()`, `move_to()`, `pickup()`），并处理这些动作对世界状态的即时改变。
5.  **关系与状态系统 (Status & Relationship System)**
    - **核心职责**：追踪 Agent 的“角色面板”（Stats）。这包括内部状态（如：情绪、饥饿、精力）和动态的社交关系（如：对其他 Agent 的“好感度”、“熟悉度”）。

### 三、 智能体心智 (Agent Mind / Cognition)

_这是 AI 的“大脑”，负责思考、学习和记忆。_

6.  **记忆存储 (Memory Stream)**
    - **核心职责**：AI 的“长期记忆”。它使用向量数据库（如 ChromaDB）存储 Agent 感知到的一切（观察、对话、行动），并提供按“相关性、时近性、重要性”检索记忆的能力。
7.  **反思与提炼系统 (Reflection System)**
    - **核心职责**：AI 的“学习”机制。由“时间线”定时触发（例如每晚），调用 LLM 让 Agent 回顾当天的记忆，生成更高层次的“见解”或“总结”，并作为新记忆存回记忆库。

### 四、 驱动与干预 (Drivers & Intervention)

_这是为 AI 提供“动机”和“成长指引”的系统。_

8.  **目标与任务系统 (Goal & Task System)**
    - **核心职责**：AI 的“外部动机”。允许你（管理员）向世界发布“任务”或“事件”（如“举办派对”）。Agent 会感知到这些任务，并将其纳入自己的决策中。
9.  **导师指导系统 (Mentor System)**
    - **核心职责**：AI 的“高阶指引”（你最独特的设计）。在特定条件下（如 AI 陷入循环、任务失败）自动触发，调用“导师”LLM 生成指导性“建议”，并作为高权重记忆注入 AI 的“心智”中，以改变其未来行为。

### 五、 管理与观察 (Admin & Observer)

_这是你作为“上帝”或“管理员”与世界互动的界面。_

10. **观察者与控制界面 (Observer UI)**
    - **核心职责**：你的“上帝控制台”。提供一个界面（可以是简单的命令行或 Web 界面）来实时查看`日志`、控制`时间线`（暂停/快进）、手动发布`任务`，以及观察任何一个 Agent 的当前状态和记忆。
